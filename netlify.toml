# ============================
# âœ… Netlify Build Configuration
# ============================

[build]
  # The folder Netlify will deploy publicly (you can leave empty if you only serve APIs)
  publish = "public"

# ============================
# âœ… Serverless Functions Setup
# ============================
[functions]
  # Folder containing all your Netlify Functions
  directory = "functions"

  # Use esbuild for bundling
  node_bundler = "esbuild"

  # Include Node dependencies for serverless
  external_node_modules = [
    "pg",          # PostgreSQL
    "nodemailer",  # Email sending
    "qrcode",      # QR code generation
    "bcryptjs",    # Password hashing
    "sharp",       # Image processing
    "twilio"       # SMS service for password resets
  ]

# ============================
# âœ… Local Dev Settings
# ============================
[dev]
  # Force Netlify Dev to run only the functions server
  framework = "#custom"
  command = ""
  targetPort = 8888
  port = 8888
  functions = "functions"

# ============================
# âœ… Environment Configuration
# ============================
[build.environment]
  NODE_VERSION = "20"

  # Gmail SMTP settings
  SMTP_HOST = "smtp.gmail.com"
  SMTP_PORT = "587"
  SMTP_USER = "ehevelone@gmail.com"

  # ðŸš¨ IMPORTANT: Do NOT put SMTP_PASS or other secrets here
  # Store them securely in Netlify â†’ Site Settings â†’ Environment Variables
