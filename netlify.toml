# ============================
# ✅ Netlify Build Configuration
# ============================

[build]
  # ⛔ Prevent Netlify from trying to build Flutter
  command = "echo 'No frontend build step needed'"
  publish = "."
  ignore = "exit 0"

# ============================
# ✅ Serverless Functions Setup
# ============================

[functions]
  directory = "functions"
  node_bundler = "esbuild"

  # ✅ REQUIRED: Externalize native & large deps
  external_node_modules = [
    "firebase-admin",
    "pg",
    "nodemailer",
    "qrcode",
    "bcryptjs",
    "sharp",
    "twilio"
  ]

# ============================
# ✅ Environment Configuration
# ============================

[build.environment]
  NODE_VERSION = "20"
  SMTP_HOST = "smtp.gmail.com"
  SMTP_PORT = "587"
  SMTP_USER = "ehevelone@gmail.com"

# ============================
# ✅ Local Development Settings
# ============================

[dev]
  functions = "functions"
  publish = "."
  port = 8888
